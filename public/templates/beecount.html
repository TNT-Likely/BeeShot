<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>蜜蜂记账 - 截图横幅</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* 工具栏 */
        .toolbar {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toolbar button {
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .screenshot-btn {
            background: #F8C91C;
            color: #000;
            border: none;
        }

        .screenshot-btn:hover {
            background: #e5b819;
        }

        .screenshot-btn:disabled {
            background: #666;
            cursor: not-allowed;
        }

        .batch-btn {
            background: rgba(248, 201, 28, 0.2);
            color: #F8C91C;
            border: 1px solid #F8C91C;
        }

        .batch-btn:hover {
            background: rgba(248, 201, 28, 0.3);
        }

        /* 导航控制 */
        .nav-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(248, 201, 28, 0.2);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn:hover {
            background: rgba(248, 201, 28, 0.4);
        }

        .nav-btn svg {
            width: 20px;
            height: 20px;
            fill: #F8C91C;
        }

        .page-info {
            color: #F8C91C;
            font-size: 16px;
            padding: 8px 16px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
        }

        /* 幻灯片容器 - 固定像素尺寸 + 缩放预览 */
        .slides-wrapper {
            margin-top: 80px;
            position: relative;
            transform-origin: top center;
            /* 缩放比例由 JS 动态设置 */
        }

        .slide {
            width: 1080px;
            height: 1920px;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease;
            overflow: hidden;
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            position: relative;
        }

        /* 暗黑模式渐变背景 */
        .bg-gradient {
            position: absolute;
            inset: 0;
            background:
                radial-gradient(ellipse 80% 50% at 50% -20%, rgba(248, 201, 28, 0.3), transparent),
                radial-gradient(ellipse 60% 40% at 80% 60%, rgba(248, 201, 28, 0.15), transparent),
                radial-gradient(ellipse 50% 30% at 20% 80%, rgba(248, 201, 28, 0.1), transparent),
                linear-gradient(180deg, #0a0a0a 0%, #111 50%, #0a0a0a 100%);
        }

        /* 网格背景 */
        .bg-pattern {
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(rgba(248, 201, 28, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(248, 201, 28, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
        }

        .content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            height: 100%;
            padding: 50px 60px 40px;
        }

        /* 标题样式 - 固定像素 */
        .title-section {
            text-align: center;
        }

        .main-title {
            font-size: 90px;
            font-weight: 700;
            color: #F8C91C;
            margin: 0;
            letter-spacing: 12px;
            text-shadow: 0 0 40px rgba(248, 201, 28, 0.5);
        }

        .subtitle {
            font-size: 40px;
            color: rgba(255, 255, 255, 0.7);
            margin: 20px 0 0 0;
            letter-spacing: 16px;
            font-weight: 300;
        }

        /* 单图布局 - 固定像素 */
        .screenshot-single {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .screenshot-single img {
            height: 1380px;
            border-radius: 30px;
            box-shadow:
                0 30px 80px rgba(0,0,0,0.5),
                0 0 0 2px rgba(255,255,255,0.1);
        }

        /* 下载按钮区域 - 固定像素 */
        .download-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
        }

        .app-store-btn {
            display: flex;
            align-items: center;
            gap: 16px;
            background: #000;
            border: 2px solid #fff;
            border-radius: 18px;
            padding: 18px 36px;
            color: #fff;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .app-store-btn:hover {
            background: #333;
        }

        .app-store-btn svg {
            width: 52px;
            height: 52px;
            fill: #fff;
        }

        .app-store-btn .text {
            text-align: left;
        }

        .app-store-btn .text-small {
            font-size: 18px;
            opacity: 0.8;
        }

        .app-store-btn .text-large {
            font-size: 32px;
            font-weight: 600;
        }

        /* 特性卡片网格 - 第8屏 */
        .features-grid {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 40px;
            padding: 60px 40px;
            align-content: center;
        }

        .feature-item {
            background: rgba(248, 201, 28, 0.05);
            border: 2px solid rgba(248, 201, 28, 0.2);
            border-radius: 30px;
            padding: 50px 40px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            background: rgba(248, 201, 28, 0.1);
            border-color: rgba(248, 201, 28, 0.4);
        }

        .feature-icon {
            margin-bottom: 30px;
        }

        .feature-icon svg {
            width: 80px;
            height: 80px;
        }

        .feature-title {
            font-size: 36px;
            font-weight: 700;
            color: #F8C91C;
            margin-bottom: 16px;
        }

        .feature-desc {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.6;
        }

        /* 二维码布局 - 第9、10屏 */
        .qr-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 40px;
        }

        .qr-container {
            background: #fff;
            padding: 30px;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .qr-container img {
            width: 400px;
            height: 400px;
            display: block;
        }

        .qr-label {
            font-size: 32px;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
        }

        .qr-hint {
            font-size: 28px;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 10px;
        }

        /* 双二维码布局 */
        .dual-qr-section {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin: 30px 0;
        }

        .dual-qr-item {
            text-align: center;
        }

        .dual-qr-item .qr-container {
            padding: 20px;
        }

        .dual-qr-item .qr-container img {
            width: 280px;
            height: 280px;
        }

        .dual-qr-item .qr-label {
            font-size: 24px;
            margin-top: 16px;
        }

        /* 简化特性列表 */
        .features-row {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            padding: 20px 0;
        }

        .feature-tag {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(248, 201, 28, 0.1);
            border: 1px solid rgba(248, 201, 28, 0.3);
            border-radius: 50px;
            padding: 16px 32px;
        }

        .feature-tag svg {
            width: 32px;
            height: 32px;
            fill: #F8C91C;
        }

        .feature-tag span {
            font-size: 24px;
            color: #fff;
            font-weight: 500;
        }

        /* 综合展示布局 */
        .combo-layout {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            gap: 40px;
            padding-top: 20px;
        }

        .combo-layout .screenshot-small {
            height: 900px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }

        /* 双截图交叉布局 */
        .dual-screenshot {
            position: relative;
            width: 700px;
            height: 700px;
            margin: 100px 0;
        }

        .dual-screenshot img {
            position: absolute;
            height: 650px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            transition: transform 0.3s ease;
        }

        .dual-screenshot .screenshot-light {
            left: 0;
            bottom: 0;
            transform: rotate(-8deg);
            z-index: 1;
        }

        .dual-screenshot .screenshot-dark {
            right: 0;
            bottom: 0;
            transform: rotate(8deg);
            z-index: 2;
        }

        .combo-layout .dual-qr-section {
            gap: 50px;
            margin: 0;
        }

        .combo-layout .dual-qr-item .qr-container {
            padding: 20px;
        }

        .combo-layout .dual-qr-item .qr-container img {
            width: 260px;
            height: 260px;
        }

        .combo-layout .dual-qr-item .qr-label {
            font-size: 24px;
        }

        .combo-layout .features-row {
            padding: 10px 0;
        }

        /* 第9屏专属：标题上间距 */
        [data-slide="9"] .title-section {
            margin-top: 30px;
        }

        /* 浮动光点效果 */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
        }

        .orb1 {
            width: 400px;
            height: 400px;
            background: rgba(248, 201, 28, 0.15);
            top: -80px;
            right: 10%;
        }

        .orb2 {
            width: 300px;
            height: 300px;
            background: rgba(248, 201, 28, 0.1);
            bottom: 15%;
            left: 5%;
        }

        /* 预览弹窗 */
        .preview-container {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 200;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .preview-container.show {
            display: flex;
        }

        .preview-image {
            max-width: 40%;
            max-height: 85vh;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .preview-actions {
            margin-top: 20px;
            display: flex;
            gap: 16px;
        }

        .preview-actions button {
            padding: 12px 32px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .download-btn {
            background: #F8C91C;
            color: #000;
            border: none;
            font-weight: 600;
        }

        .download-btn:hover {
            background: #e5b819;
        }

        .close-btn {
            background: transparent;
            color: #fff;
            border: 1px solid #fff;
        }

        .close-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .preview-info {
            color: rgba(255,255,255,0.6);
            margin-top: 16px;
            font-size: 14px;
        }

        /* 缩放提示 */
        .scale-info {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 20px;
        }
    </style>
</head>
<body>
    <!-- 工具栏 -->
    <div class="toolbar">
        <button class="screenshot-btn" onclick="takeScreenshot()">
            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/></svg>
            截图当前页
        </button>
        <button class="batch-btn" onclick="batchScreenshot()">批量截图打包 (9张)</button>
    </div>

    <!-- 导航控制 -->
    <div class="nav-controls">
        <button class="nav-btn" onclick="prevSlide()">
            <svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        </button>
        <span class="page-info"><span id="currentPage">1</span> / 9</span>
        <button class="nav-btn" onclick="nextSlide()">
            <svg viewBox="0 0 24 24"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/></svg>
        </button>
    </div>

    <!-- 幻灯片 -->
    <div class="slides-wrapper">
        <!-- 第1屏：产品总览 -->
        <div class="slide active" data-slide="1">
            <div class="bg-gradient"></div>
            <div class="bg-pattern"></div>
            <div class="orb orb1"></div>
            <div class="orb orb2"></div>
            <div class="content">
                <div class="title-section">
                    <h1 class="main-title">蜜蜂记账</h1>
                    <p class="subtitle">简洁 · 安全 · 可控</p>
                </div>
                <div class="screenshot-single">
                    <img src="/demo/preview/zh/01-home.png" alt="首页">
                </div>
                <div class="download-buttons">
                    <a class="app-store-btn" href="#">
                        <svg viewBox="0 0 24 24"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>
                        <div class="text">
                            <div class="text-small">Download on the</div>
                            <div class="text-large">App Store</div>
                        </div>
                    </a>
                    <a class="app-store-btn" href="#">
                        <svg viewBox="0 0 24 24"><path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z"/></svg>
                        <div class="text">
                            <div class="text-small">Get it on</div>
                            <div class="text-large">GitHub</div>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!-- 第2屏：多种记账方式 -->
        <div class="slide" data-slide="2">
            <div class="bg-gradient"></div>
            <div class="bg-pattern"></div>
            <div class="orb orb1"></div>
            <div class="orb orb2"></div>
            <div class="content">
                <div class="title-section">
                    <h1 class="main-title">多种记账方式</h1>
                    <p class="subtitle">语音 · 拍照 · 截图 · 分享</p>
                </div>
                <div class="screenshot-single">
                    <img src="/demo/preview/zh/03-edit-transaction.png" alt="记账">
                </div>
            </div>
        </div>

        <!-- 第3屏：数据统计 -->
        <div class="slide" data-slide="3">
            <div class="bg-gradient"></div>
            <div class="bg-pattern"></div>
            <div class="orb orb1"></div>
            <div class="orb orb2"></div>
            <div class="content">
                <div class="title-section">
                    <h1 class="main-title">统计分析</h1>
                    <p class="subtitle">收支趋势一目了然</p>
                </div>
                <div class="screenshot-single">
                    <img src="/demo/preview/zh/04-chart-analysis.png" alt="统计分析">
                </div>
            </div>
        </div>

        <!-- 第4屏：云服务 -->
        <div class="slide" data-slide="4">
            <div class="bg-gradient"></div>
            <div class="bg-pattern"></div>
            <div class="orb orb1"></div>
            <div class="orb orb2"></div>
            <div class="content">
                <div class="title-section">
                    <h1 class="main-title">多种云同步</h1>
                    <p class="subtitle">iCloud · WebDAV · Supabase</p>
                </div>
                <div class="screenshot-single">
                    <img src="/demo/preview/zh/11-cloud-service.png" alt="云服务">
                </div>
            </div>
        </div>

        <!-- 第5屏：个性化 -->
        <div class="slide" data-slide="5">
            <div class="bg-gradient"></div>
            <div class="bg-pattern"></div>
            <div class="orb orb1"></div>
            <div class="orb orb2"></div>
            <div class="content">
                <div class="title-section">
                    <h1 class="main-title">个性定制</h1>
                    <p class="subtitle">主题色 · 多账本</p>
                </div>
                <div class="screenshot-single">
                    <img src="/demo/preview/zh/10-personalization.png" alt="个性化">
                </div>
            </div>
        </div>

        <!-- 第6屏：AI对话记账 -->
        <div class="slide" data-slide="6">
            <div class="bg-gradient"></div>
            <div class="bg-pattern"></div>
            <div class="orb orb1"></div>
            <div class="orb orb2"></div>
            <div class="content">
                <div class="title-section">
                    <h1 class="main-title">AI 对话记账</h1>
                    <p class="subtitle">像聊天一样记账</p>
                </div>
                <div class="screenshot-single">
                    <img src="/demo/preview/dark/05-ai-chat.png" alt="AI对话">
                </div>
            </div>
        </div>

        <!-- 第7屏：暗黑模式 -->
        <div class="slide" data-slide="7">
            <div class="bg-gradient"></div>
            <div class="bg-pattern"></div>
            <div class="orb orb1"></div>
            <div class="orb orb2"></div>
            <div class="content">
                <div class="title-section">
                    <h1 class="main-title">暗黑模式</h1>
                    <p class="subtitle">护眼 · OLED友好</p>
                </div>
                <div class="screenshot-single">
                    <img src="/demo/preview/dark/01-home.png" alt="暗黑首页">
                </div>
            </div>
        </div>

        <!-- 第8屏：开源安全 -->
        <div class="slide" data-slide="8">
            <div class="bg-gradient"></div>
            <div class="bg-pattern"></div>
            <div class="orb orb1"></div>
            <div class="orb orb2"></div>
            <div class="content">
                <div class="title-section">
                    <h1 class="main-title">开源免费</h1>
                    <p class="subtitle">无广告 · 隐私安全</p>
                </div>
                <div class="features-grid">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg viewBox="0 0 24 24" fill="#F8C91C"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                        </div>
                        <div class="feature-title">100% 开源</div>
                        <div class="feature-desc">代码完全公开透明<br>GitHub 可查看</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg viewBox="0 0 24 24" fill="#F8C91C"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
                        </div>
                        <div class="feature-title">隐私优先</div>
                        <div class="feature-desc">数据存本地<br>不收集个人信息</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg viewBox="0 0 24 24" fill="#F8C91C"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                        </div>
                        <div class="feature-title">永久免费</div>
                        <div class="feature-desc">无内购无订阅<br>所有功能免费用</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg viewBox="0 0 24 24" fill="#F8C91C"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>
                        </div>
                        <div class="feature-title">无广告</div>
                        <div class="feature-desc">纯净体验<br>专注记账本身</div>
                    </div>
                </div>
                <div class="download-buttons">
                    <a class="app-store-btn" href="#">
                        <svg viewBox="0 0 24 24"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>
                        <div class="text">
                            <div class="text-small">Download on the</div>
                            <div class="text-large">App Store</div>
                        </div>
                    </a>
                    <a class="app-store-btn" href="#">
                        <svg viewBox="0 0 24 24"><path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z"/></svg>
                        <div class="text">
                            <div class="text-small">Get it on</div>
                            <div class="text-large">GitHub</div>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!-- 第9屏：图片预览 + 二维码 + 特性 -->
        <div class="slide" data-slide="9">
            <div class="bg-gradient"></div>
            <div class="bg-pattern"></div>
            <div class="orb orb1"></div>
            <div class="orb orb2"></div>
            <div class="content">
                <div class="title-section">
                    <h1 class="main-title">蜜蜂记账</h1>
                    <p class="subtitle">简洁 · 安全 · 可控</p>
                </div>
                <div class="combo-layout">
                    <div class="dual-screenshot">
                        <img class="screenshot-light" src="/demo/preview/zh/01-home.png" alt="亮色首页">
                        <img class="screenshot-dark" src="/demo/preview/dark/01-home.png" alt="暗黑首页">
                    </div>
                    <div class="dual-qr-section">
                        <div class="dual-qr-item">
                            <div class="qr-container">
                                <img src="https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=https://apps.apple.com/app/id6754611670" alt="App Store">
                            </div>
                            <div class="qr-label">
                                <svg viewBox="0 0 24 24" fill="#F8C91C" width="28" height="28" style="vertical-align: middle; margin-right: 8px;"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>
                                iOS
                            </div>
                        </div>
                        <div class="dual-qr-item">
                            <div class="qr-container">
                                <img src="https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=https://github.com/TNT-Likely/BeeCount/releases/latest" alt="GitHub">
                            </div>
                            <div class="qr-label">
                                <svg viewBox="0 0 24 24" fill="#F8C91C" width="28" height="28" style="vertical-align: middle; margin-right: 8px;"><path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z"/></svg>
                                Android
                            </div>
                        </div>
                    </div>
                    <div class="features-row">
                        <div class="feature-tag">
                            <svg viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                            <span>开源</span>
                        </div>
                        <div class="feature-tag">
                            <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
                            <span>隐私</span>
                        </div>
                        <div class="feature-tag">
                            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                            <span>免费</span>
                        </div>
                        <div class="feature-tag">
                            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>
                            <span>无广告</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 预览弹窗 -->
    <div class="preview-container" id="previewContainer">
        <img class="preview-image" id="previewImage" src="" alt="预览">
        <div class="preview-actions">
            <button class="download-btn" onclick="downloadImage()">下载图片</button>
            <button class="close-btn" onclick="closePreview()">关闭</button>
        </div>
        <div class="preview-info" id="previewInfo">尺寸: 1080 x 1920</div>
    </div>

    <!-- 缩放提示 -->
    <div class="scale-info" id="scaleInfo">实际尺寸: 1080 × 1920 px | 所见即所得</div>

    <!-- html2canvas CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- JSZip for batch download -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <script>
        let currentSlide = 1;
        const totalSlides = 9;
        let currentImageData = null;

        const slideTitles = {
            1: '蜜蜂记账',
            2: '多种记账方式',
            3: '统计分析',
            4: '多种云同步',
            5: '个性定制',
            6: 'AI对话记账',
            7: '暗黑模式',
            8: '开源免费',
            9: '综合展示'
        };

        function updateSlide() {
            document.querySelectorAll('.slide').forEach(slide => {
                slide.classList.remove('active');
            });
            document.querySelector(`[data-slide="${currentSlide}"]`).classList.add('active');
            document.getElementById('currentPage').textContent = currentSlide;
        }

        function nextSlide() {
            currentSlide = currentSlide >= totalSlides ? 1 : currentSlide + 1;
            updateSlide();
        }

        function prevSlide() {
            currentSlide = currentSlide <= 1 ? totalSlides : currentSlide - 1;
            updateSlide();
        }

        function goToSlide(n) {
            currentSlide = n;
            updateSlide();
        }

        // 截图功能 - 所见即所得
        async function takeScreenshot() {
            const btn = document.querySelector('.screenshot-btn');
            btn.disabled = true;
            btn.innerHTML = '截图中...';

            // 临时移除缩放
            const wrapper = document.querySelector('.slides-wrapper');
            const originalTransform = wrapper.style.transform;
            wrapper.style.transform = 'none';

            try {
                const slideEl = document.querySelector(`[data-slide="${currentSlide}"]`);

                const canvas = await html2canvas(slideEl, {
                    width: 1080,
                    height: 1920,
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#0a0a0a'
                });

                currentImageData = canvas.toDataURL('image/png');
                document.getElementById('previewImage').src = currentImageData;
                document.getElementById('previewInfo').textContent =
                    `尺寸: ${canvas.width} x ${canvas.height} | 第${currentSlide}屏: ${slideTitles[currentSlide]}`;
                document.getElementById('previewContainer').classList.add('show');

            } catch (err) {
                alert('截图失败: ' + err.message);
                console.error(err);
            }

            // 恢复缩放
            wrapper.style.transform = originalTransform;

            btn.disabled = false;
            btn.innerHTML = `<svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/></svg>截图当前页`;
        }

        // 批量截图 - 打包为zip
        async function batchScreenshot() {
            const btn = document.querySelector('.batch-btn');
            btn.disabled = true;
            const originalSlide = currentSlide;
            const zip = new JSZip();
            const imgFolder = zip.folder('蜜蜂记账-宣传图');

            // 临时移除缩放
            const wrapper = document.querySelector('.slides-wrapper');
            const originalTransform = wrapper.style.transform;
            wrapper.style.transform = 'none';

            for (let i = 1; i <= totalSlides; i++) {
                btn.textContent = `正在截图 ${i}/${totalSlides}...`;

                currentSlide = i;
                updateSlide();
                await new Promise(resolve => setTimeout(resolve, 600));

                try {
                    const slideEl = document.querySelector(`[data-slide="${i}"]`);
                    const canvas = await html2canvas(slideEl, {
                        width: 1080,
                        height: 1920,
                        scale: 2,
                        useCORS: true,
                        allowTaint: true,
                        backgroundColor: '#0a0a0a'
                    });

                    // 转换为blob并添加到zip
                    const dataUrl = canvas.toDataURL('image/png');
                    const base64Data = dataUrl.replace(/^data:image\/png;base64,/, '');
                    const fileName = `${String(i).padStart(2, '0')}-${slideTitles[i]}.png`;
                    imgFolder.file(fileName, base64Data, {base64: true});
                } catch (err) {
                    console.error(`第${i}屏截图失败:`, err);
                }
            }

            // 生成并下载zip
            btn.textContent = '正在打包...';
            try {
                const content = await zip.generateAsync({type: 'blob'});
                const link = document.createElement('a');
                link.href = URL.createObjectURL(content);
                link.download = '蜜蜂记账-宣传图.zip';
                link.click();
                URL.revokeObjectURL(link.href);
            } catch (err) {
                console.error('打包失败:', err);
                alert('打包失败: ' + err.message);
            }

            // 恢复缩放
            wrapper.style.transform = originalTransform;

            currentSlide = originalSlide;
            updateSlide();
            btn.disabled = false;
            btn.textContent = `批量截图打包 (${totalSlides}张)`;
        }

        function downloadImage() {
            if (!currentImageData) return;
            const link = document.createElement('a');
            link.download = `${currentSlide}-${slideTitles[currentSlide]}.png`;
            link.href = currentImageData;
            link.click();
        }

        function closePreview() {
            document.getElementById('previewContainer').classList.remove('show');
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closePreview();
            else if (e.key === 'ArrowRight' || e.key === ' ') nextSlide();
            else if (e.key === 'ArrowLeft') prevSlide();
            else if (e.key === '0') goToSlide(10);
            else if (e.key >= '1' && e.key <= '9') goToSlide(parseInt(e.key));
        });

        // 自适应缩放 - 让幻灯片在一屏内可见
        function updateScale() {
            const wrapper = document.querySelector('.slides-wrapper');
            const slideHeight = 1920;
            const slideWidth = 1080;
            const viewportHeight = window.innerHeight - 120; // 减去工具栏高度
            const viewportWidth = window.innerWidth;

            // 计算缩放比例（取高度和宽度中较小的缩放值）
            const scaleH = viewportHeight / slideHeight;
            const scaleW = viewportWidth / slideWidth;
            const scale = Math.min(scaleH, scaleW, 1); // 最大不超过1

            wrapper.style.transform = `scale(${scale})`;

            // 更新缩放提示
            const scaleInfo = document.getElementById('scaleInfo');
            scaleInfo.textContent = `实际尺寸: 1080 × 1920 px | 预览缩放: ${Math.round(scale * 100)}%`;
        }

        // 初始化和窗口大小变化时更新缩放
        updateScale();
        window.addEventListener('resize', updateScale);
    </script>
</body>
</html>
